const miBlackJack=(()=>{"use strict";let e=[],a=["C","D","H","S"],s=["J","Q","K","A"],t=document.getElementById("nuevoJuego"),d=document.getElementById("pedirCarta"),n=document.getElementById("stop"),l=new Audio("assets/sounds/shuffling-cards-01.mp3"),r=new Audio("assets/sounds/funny-chipmunk-laugh-doug-organ-1-00-01.mp3"),i=new Audio("assets/sounds/frog-laughing-meme.mp3"),o=new Audio("assets/sounds/goodresult.mp3"),c=document.getElementById("alerta"),$=document.querySelectorAll(".divCartas"),u=document.querySelectorAll("span"),m=[],g=(e=2)=>{m=[];for(let a=0;a<e;a++)m.push(0);u.forEach(e=>e.innerText=0),$.forEach(e=>e.innerHTML=""),d.disabled=!0,n.disabled=!0,c.innerText="",c.classList.remove("ganaste","perdiste","empate","mensaje-rebote","mensaje-ganador")},p=()=>{e=[];for(let t=2;t<=10;t++)for(let d of a)e.push(`${t}${d}`);for(let n of a)for(let r of s)e.push(`${r}${n}`);return l.play(),_.shuffle(e)},f=()=>{if(e.length<1)throw alert("No hay mas cartas"),"No hay mas cartas";return e.shift()},h=e=>{let a=e.substring(0,e.length-1);return isNaN(a)?"A"===a?11:10:parseInt(a)},b=(e,a)=>(m[a]+=h(e),u[a].innerText=m[a],m[a]),y=(e,a)=>{let s=document.createElement("img");s.src=`../assets/cartas/${e}.webp`,s.classList.add("carta"),s.classList.add("carta-animada"),s.loading="lazy",$[a].append(s),setTimeout(()=>{s.classList.add("carta-flotante")},600)},L=()=>{let[e,a]=m;setTimeout(()=>{e===a?(c.classList.add("empate"),c.classList.add("mensaje-rebote"),c.innerText=`Es un empate 🦆🦆🦆`):e>21?(c.classList.add("perdiste"),c.classList.add("mensaje-rebote"),i.play(),c.innerText=`IA GANO 🐊🐊🐊`):a>21?(c.classList.add("ganaste"),c.classList.add("mensaje-ganador"),o.play(),c.innerText=`Player 1 GANO  😎😎😎`):e<a&&(c.classList.add("perdiste"),c.classList.add("mensaje-rebote"),c.innerText=`IA  GANO 🐸🐸🐸`,r.play())},100)},E=e=>new Promise(a=>setTimeout(a,e)),w=async e=>{let a=0;do{let s=f();a=b(s,m.length-1),y(s,m.length-1),a>=17&&a<=20?await E(1500):await E(500)}while(a<e&&e<=21);L()};return d.addEventListener("click",()=>{let e=f(),a=b(e,0);y(e,0),a>21?(d.disabled=!0,w(a),n.disabled=!0):21===a&&(d.disabled=!0,w(a),n.disabled=!0)}),n.addEventListener("click",()=>{d.disabled=!0,w(m[0]),n.disabled=!0}),t.addEventListener("click",()=>{g(),d.disabled=!1,n.disabled=!1,e=p()}),{juegoNuevo:g}})();
