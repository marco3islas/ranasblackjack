const miBlackJack=(()=>{"use strict";let e=[],s=["C","D","H","S"],a=["J","Q","K","A"],t=document.getElementById("nuevoJuego"),n=document.getElementById("pedirCarta"),d=document.getElementById("stop"),l=new Audio("assets/sounds/shuffling-cards-01.mp3"),r=new Audio("assets/sounds/funny-chipmunk-laugh-doug-organ-1-00-01.mp3"),i=new Audio("assets/sounds/frog-laughing-meme.mp3"),o=new Audio("assets/sounds/goodresult.mp3"),c=document.getElementById("alerta"),$=document.querySelectorAll(".divCartas"),u=document.querySelectorAll("span"),m=[],g=(e=2)=>{m=[];for(let s=0;s<e;s++)m.push(0);u.forEach(e=>e.innerText=0),$.forEach(e=>e.innerHTML=""),n.disabled=!0,d.disabled=!0,c.innerText="",c.classList.remove("ganaste","perdiste","empate","mensaje-rebote","mensaje-ganador")},p=()=>{e=[];for(let t=2;t<=10;t++)for(let n of s)e.push(`${t}${n}`);for(let d of s)for(let r of a)e.push(`${r}${d}`);return l.play(),_.shuffle(e)},f=()=>{if(e.length<1)throw alert("No hay mas cartas"),"No hay mas cartas";return e.shift()},h=e=>{let s=e.substring(0,e.length-1);return isNaN(s)?"A"===s?11:10:parseInt(s)},L=(e,s)=>(m[s]+=h(e),u[s].innerText=m[s],m[s]),b=(e,s)=>{let a=document.createElement("img");a.src=`../assets/cartas/${e}.png`,a.classList.add("carta"),a.classList.add("carta-animada"),$[s].append(a),setTimeout(()=>{a.classList.add("carta-flotante")},600)},y=()=>{let[e,s]=m;setTimeout(()=>{e===s?(c.classList.add("empate"),c.classList.add("mensaje-rebote"),c.innerText=`Es un empate ğŸ¦†ğŸ¦†ğŸ¦†`):e>21?(c.classList.add("perdiste"),c.classList.add("mensaje-rebote"),i.play(),c.innerText=`IA GANO ğŸŠğŸŠğŸŠ`):s>21?(c.classList.add("ganaste"),c.classList.add("mensaje-ganador"),o.play(),c.innerText=`Player 1 GANO  ğŸ˜ğŸ˜ğŸ˜`):e<s&&(c.classList.add("perdiste"),c.classList.add("mensaje-rebote"),c.innerText=`IA  GANO ğŸ¸ğŸ¸ğŸ¸`,r.play())},100)},E=e=>new Promise(s=>setTimeout(s,e)),w=async e=>{let s=0;do{let a=f();s=L(a,m.length-1),b(a,m.length-1),s>=17&&s<=20?await E(1500):await E(500)}while(s<e&&e<=21);y()};return n.addEventListener("click",()=>{let e=f(),s=L(e,0);b(e,0),s>21?(n.disabled=!0,w(s),d.disabled=!0):21===s&&(n.disabled=!0,w(s),d.disabled=!0)}),d.addEventListener("click",()=>{n.disabled=!0,w(m[0]),d.disabled=!0}),t.addEventListener("click",()=>{g(),n.disabled=!1,d.disabled=!1,e=p()}),{juegoNuevo:g}})();
